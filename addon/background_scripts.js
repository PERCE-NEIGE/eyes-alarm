!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=15)}([function(e,t,n){"use strict";function r(e){console.info(e)}function o(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}function s(e){return browser.i18n.getMessage(e)}function i(){u.debugMode&&console.log(arguments.reduce(function(e,t){return e+t},""))}function c(e){if(!Number.isInteger(e))return console.error("input time ["+e+"] is not integer"),"ERROR";var t=[],n=0;if(e>=60)do e-=60,n+=1;while(e>=60);return t.push(n,e),t.map(function(e){return a(e)}).join(":")}function a(e){return e<10?"0"+e:e}var u=n(1);e.exports={handleResponse:r,toTitleCase:o,getLocalString:s,log:i,formatTime:c}},function(e,t,n){"use strict";e.exports={debugMode:!0}},function(e,t,n){"use strict";var r=n(4),o=["isReading","passedMinutes","breakTimeAmount","readingTimeAmount","idleDetectionInterval"],s={store:{},load:function(e){var t=e.callback,n=e.params;browser.storage.local.get(Object.keys(s.store)).then(function(e){o.forEach(function(t){s.store[t]=e[t]||r[t]}),t&&t(n)}).catch(function(e){console.error(e)})}};e.exports=s},,function(e,t,n){"use strict";e.exports={isReading:!0,passedMinutes:0,breakTimeAmount:10,readingTimeAmount:50,idleDetectionInterval:600}},function(e,t,n){"use strict";var r=n(2),o={reset:function(){r.store.passedMinutes=0},plus:function(e){r.store.passedMinutes+=e}};e.exports=o},function(e,t,n){"use strict";var r={start:function(){browser.alarms.create("eyes-alarm-counter",{periodInMinutes:1})},stop:function(){browser.alarms.clear("eyes-alarm-counter")},restart:function(){r.stop(),r.start()}};e.exports=r},function(e,t,n){"use strict";var r=n(14),o=n(2),s={type:"basic",iconUrl:browser.extension.getURL(r.notificationIcon),title:browser.i18n.getMessage("notificationTitle"),message:browser.i18n.getMessage("notificationContent")},i={icon:{switch:function(e){var t=e?r.greenButton:r.redButton;browser.browserAction.setIcon({path:t})}},notice:{create:function(){browser.notifications.create("eyes-alarm-n",s)},clear:function(){browser.notifications.clear("eyes-alarm-n")}},clock:{switch:function(e){o.store.isReading=e},sync:function(){browser.extension.getViews({type:"popup"}).length&&browser.runtime.sendMessage({time:o.store.passedMinutes,reading:o.store.isReading}).catch(function(e){return console.error(e)})}}};e.exports=i},,function(e,t,n){"use strict";var r=n(7),o=(n(5),n(6)),s=!1,i={setInterval:function(e){browser.idle.setDetectionInterval(e)},detect:{start:function(){browser.idle.onStateChanged.addListener(i.dispatch)},stop:function(){browser.idle.onStateChanged.removeListener(i.dispatch)}},dispatch:function(e){switch(e){case"active":s&&(o.start(),s=!1);break;case"locked":o.stop(),r.notice.clear(),r.icon.switch(!0),r.clock.switch(!0),r.clock.sync(),s=!0}}};e.exports=i},,,,,function(e,t,n){"use strict";var r={greenButton:"icons/set-timer-button.png",redButton:"icons/set-timer-button-red.png",notificationIcon:"icons/notification.png"};e.exports=r},function(e,t,n){"use strict";function r(){l.reset(),u.icon.switch(!0),u.clock.switch(!0),u.clock.sync()}function o(){l.reset(),u.icon.switch(!1),u.clock.switch(!1),u.clock.sync(),u.notice.create()}function s(){}function i(){return p.store.isReading&&p.store.passedMinutes>=p.store.readingTimeAmount}function c(){l.plus(1),u.clock.sync()}var a=n(0),u=(a.handleResponse,n(7)),f=n(9),l=n(5),d=n(6),p=n(2);browser.alarms.onAlarm.addListener(function(e){c(),i()?(d.restart(),o()):s()&&(d.restart(),r())}),browser.runtime.onMessage.addListener(function(e,t,n){switch(e.type){case"requestTime":break;case"resetCounter":d.restart(),r()}if(browser.extension.getViews({type:"popup"}).length){var o={time:p.store.passedMinutes,reading:p.store.isReading};browser.runtime.sendMessage(o).catch(function(e){console.error(e)})}return!0}),browser.storage.onChanged.addListener(function(e,t){"local"===t&&p.load({callback:function(){d.restart(),r()}})}),p.load({callback:function(){f.detect.start(),d.start()}})}]);