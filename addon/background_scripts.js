!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=16)}([function(e,t,r){"use strict";function n(e){console.error(e)}function o(e){console.info(e)}function a(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}function i(e){return browser.i18n.getMessage(e)}function s(e){u.debugMode&&console.log(e)}function c(e){var t=[];for(var r in e)if(e.hasOwnProperty(r)){if("days"===r&&0===e[r])continue;var n=e[r]>=10?"":"0";t.push(n+e[r])}return t.join(":")}var u=r(3);e.exports={handleResponse:o,handleError:n,toTitleCase:a,getLocalString:i,log:s,formatTime:c}},function(e,t,r){"use strict";var n=r(0),o=n.getLocalString,a=o("extensionName"),i="["+a+"] ",s="[event] ";e.exports={TAG:i,eventTAG:s}},function(e,t,r){"use strict";var n={id:"alarmWork",interval:50},o={id:"alarmBreak",interval:10},a={id:"alarmCounter",interval:1},i=[n.id,o.id];e.exports={alarmWork:n,alarmBreak:o,alarmCounter:a,alarmKeys:i}},function(e,t,r){"use strict";e.exports={debugMode:!1}},function(e,t,r){"use strict";var n=r(2),o=(n.alarmWork,n.alarmBreak,n.alarmKeys),a=r(0),i=(a.handleError,a.log),s=r(1),c=s.TAG,u=r(8),l={TAG:"[Alarms] ",keys:o,getAll:function(){return browser.alarms.getAll().then(function(e){return e.map(function(e){return e.name})}).then(function(e){return e.filter(function(e){return l.keys.includes(e.name)})})},start:function(e){i(c+l.TAG+("start... "+e));var t=u.get(e);browser.alarms.create(e,{delayInMinutes:t})},stop:function(e){i(c+l.TAG+("stop... "+e)),browser.alarms.clear(e)},stopAll:function(){l.getAll().then(function(e){e.map(function(e){l.stop(e)})})},restart:function(){l.getAll().then(function(e){e.map(function(e){l.stop(e),l.start(e)})})}};e.exports=l},function(e,t,r){"use strict";var n=r(9),o=(n.clockLimit,n.time),a=r(2),i=a.alarmCounter,s=r(0),c=(s.handleResponse,s.handleError),u=s.log,l=r(1),d=l.TAG,f={TAG:"[Counter] ",units:["mins","hours","days"],reversed:!1,id:i.id,interval:i.interval,skipLog:!1,start:function(){u(d+f.TAG+"start..."),browser.alarms.create(f.id,{periodInMinutes:f.interval})},stop:function(){u(d+f.TAG+"stop..."),browser.alarms.clear(f.id),f.time.reset()},restart:function(){f.stop(),f.start()},reverse:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];f.reversed=e},time:{set:function(e){o.mins=e},reset:function(){for(var e in o)o[e]=0},count:function(e){o.mins+=e}},ui:{sync:function(){browser.extension.getViews({type:"popup"}).length&&browser.runtime.sendMessage({time:o,reversed:f.reversed}).catch(c)}}};e.exports=f},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o,a=r(2),i=a.alarmWork,s=a.alarmBreak,c={TAG:"[Icon] ",paths:(o={},n(o,i.id,"icons/set-timer-button.png"),n(o,s.id,"icons/set-timer-button-red.png"),o),set:function(e){try{browser.browserAction.setIcon({path:c.paths[e]})}catch(e){console.error(e)}}};e.exports=c},function(e,t,r){"use strict";var n=r(2),o=n.alarmBreak,a=r(1),i=(a.TAG,{type:"basic",iconUrl:browser.extension.getURL("icons/notification.png"),title:browser.i18n.getMessage("notificationTitle"),message:browser.i18n.getMessage("notificationContent")}),s={TAG:"[notice] ",create:function(){browser.notifications.create(o.id,i)},clear:function(){browser.notifications.clear(o.id)}};e.exports=s},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o,a=r(2),i=a.alarmWork,s=a.alarmBreak,c=(a.alarmKeys,r(0)),u=c.handleError,l=c.log,d=r(1),f=d.TAG,p={TAG:"[setting] ",store:(o={},n(o,i.id,i.interval),n(o,s.id,s.interval),n(o,"idleDetectionInterval",60*s.interval),o),get:function(e){return p.store[e]},load:function(e){var t=e.callback,r=e.params;browser.storage.local.get(Object.keys(p.store)).then(function(e){for(var n in e)p.store[n]=e[n];l(f+p.TAG+"setting loaded"),t&&t(r)},u)}};e.exports=p},function(e,t,r){"use strict";var n={days:365,hours:24,mins:60},o={days:0,hours:0,mins:0};e.exports={clockLimit:n,time:o}},,function(e,t,r){"use strict";var n=r(1),o=n.TAG,a=r(2),i=a.alarmWork,s=r(0),c=s.log,u=r(4),l=r(5),d=r(7),f=r(6),p=!1,m={TAG:"[idle] ",setInterval:function(e){browser.idle.setDetectionInterval(e)},dispatch:function(e){switch(e){case"active":p&&(c(o+m.TAG+"re-activate..."),u.start(i.id),l.start(),p=!1);break;case"locked":c(o+m.TAG+"stop counters..."),l.stop(),u.stopAll(),c(o+m.TAG+"reset ui..."),f.set(i.id),d.clear(),l.reverse(!1),l.ui.sync(),p=!0}},detect:{start:function(){browser.idle.onStateChanged.addListener(m.dispatch)},stop:function(){browser.idle.onStateChanged.removeListener(m.dispatch)}}};e.exports=m},,,,,function(e,t,r){"use strict";function n(e,t){w.reverse(e),w.ui.sync(),h.set(t)}function o(){b(s+"start work..."),A.start(l.id),w.restart(),n(!1,l.id)}function a(){b(s+"start break..."),A.start(d.id),w.restart(),T.create(),n(!0,d.id)}var i=r(1),s=i.TAG,c=i.eventTAG,u=r(2),l=u.alarmWork,d=u.alarmBreak,f=u.alarmCounter,p=r(0),m=(p.handleResponse,p.handleError),b=p.log,g=r(9),v=(g.clockLimit,g.time),h=r(6),w=r(5),A=r(4),k=r(11),y=r(8),T=r(7);y.load({callback:function(){k.detect.start(),o()}}),browser.alarms.onAlarm.addListener(function(e){switch(b(s+c+e.name),e.name){case l.id:a();break;case d.id:o();break;case f.id:w.time.count(f.interval),w.ui.sync()}}),browser.runtime.onMessage.addListener(function(e,t,r){switch(b(s+c+e.type),e.type){case"requestTime":break;case"resetCounter":A.stopAll(),o()}return browser.extension.getViews({type:"popup"}).length&&browser.runtime.sendMessage({time:v,reversed:w.reversed}).catch(m),!0}),browser.storage.onChanged.addListener(function(e,t){"local"===t&&(b(s+"[storage] changed"),y.load({callback:function(){A.restart(),w.restart()}}))}),browser.browserAction.onClicked.addListener(function(){browser.notifications.clear(d.id)})}]);